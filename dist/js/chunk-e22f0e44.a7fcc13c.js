(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e22f0e44"],{e5bd:function(t,e,o){"use strict";o.r(e);var n=o("7a23"),c={class:"table mt-4"},a=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",{width:"120"},"分類"),Object(n["h"])("th",null,"優惠卷名稱"),Object(n["h"])("th",{width:"120"},"折扣百分比"),Object(n["h"])("th",{width:"120"},"折扣代碼"),Object(n["h"])("th",{width:"100"},"是否啟用"),Object(n["h"])("th",{width:"200"},"編輯")])],-1),i={class:"text-right"},l={class:"text-right"},s={key:0,class:"text-success"},u={key:1,class:"text-success"},d={class:"btn-group"},p=["onClick"],r=["onClick"];function b(t,e,o,b,h,m){var O=Object(n["E"])("PaginationVue"),j=Object(n["E"])("CouponModel"),f=Object(n["E"])("DelModal");return Object(n["v"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("button",{class:"btn btn-danger",onClick:e[0]||(e[0]=Object(n["P"])((function(t){return m.openModal(!0)}),["prevent"]))},"新增優惠卷"),Object(n["h"])("table",c,[a,Object(n["h"])("tbody",null,[(Object(n["v"])(!0),Object(n["g"])(n["a"],null,Object(n["C"])(h.coupons.coupons,(function(t){return Object(n["v"])(),Object(n["g"])("tr",{key:t.due_data},[Object(n["h"])("td",null,Object(n["H"])(m.cangeTime(t.due_date)),1),Object(n["h"])("td",null,Object(n["H"])(t.title),1),Object(n["h"])("td",i,Object(n["H"])(t.percent),1),Object(n["h"])("td",l,Object(n["H"])(t.code),1),Object(n["h"])("td",null,[(t.is_enabled=1)?(Object(n["v"])(),Object(n["g"])("span",s,"啟用")):(Object(n["v"])(),Object(n["g"])("span",u,"不啟用"))]),Object(n["h"])("td",null,[Object(n["h"])("div",d,[Object(n["h"])("button",{class:"btn btn-outline-primary btn-sm",onClick:Object(n["P"])((function(e){return m.openModal(!1,t)}),["prevent"])},"編輯",8,p),Object(n["h"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(e){return m.OpenDelCoupon(t)}},"刪除",8,r)])])])})),128))])]),Object(n["k"])(O,{pages:h.pagination,onEmitPages:m.getCoupons},null,8,["pages","onEmitPages"]),Object(n["k"])(j,{ref:"couponModel",onEmitCoupon:m.addCoupon,coupon:h.couponsItem},null,8,["onEmitCoupon","coupon"]),Object(n["k"])(f,{ref:"delModal",product:h.couponsItem,onDelItem:m.delCoupon},null,8,["product","onDelItem"])],64)}var h=o("5530"),m=(o("99af"),o("a15b"),{class:"modal",tabindex:"-1",ref:"modal"}),O={class:"modal-dialog"},j={class:"modal-content"},f=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("h5",{class:"modal-title"},"新增優惠卷"),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),g={class:"modal-body"},v={class:"mb-3"},w=Object(n["h"])("label",{for:"title",class:"form-label"},"優惠卷名稱",-1),C={class:"mb-3"},I=Object(n["h"])("label",{for:"price",class:"form-label"},"優惠卷折扣(百分比)",-1),y={class:"mb-3"},k=Object(n["h"])("label",{for:"origin_price",class:"form-label"},"使用期限",-1),M={class:"mb-3"},x=Object(n["h"])("label",{for:"price",class:"form-label"},"優惠卷代碼",-1),_={class:"mb-3"},D={class:"form-check"},$=Object(n["h"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),E={class:"modal-footer"};function P(t,e,o,c,a,i){return Object(n["v"])(),Object(n["g"])("div",null,[Object(n["h"])("div",m,[Object(n["h"])("div",O,[Object(n["h"])("div",j,[f,Object(n["h"])("div",g,[Object(n["h"])("div",null,[Object(n["h"])("div",v,[w,Object(n["O"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.couponItem.title=t}),placeholder:"請輸入名稱"},null,512),[[n["K"],a.couponItem.title]])]),Object(n["h"])("div",C,[I,Object(n["O"])(Object(n["h"])("input",{type:"number",class:"form-control",id:"unit","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.couponItem.percent=t}),placeholder:"請輸入折扣"},null,512),[[n["K"],a.couponItem.percent]])]),Object(n["h"])("div",y,[k,Object(n["O"])(Object(n["h"])("input",{type:"date",class:"form-control",id:"origin_price","onUpdate:modelValue":e[2]||(e[2]=function(t){return i.changTime=t}),placeholder:"請輸入日期"},null,512),[[n["K"],i.changTime]])]),Object(n["h"])("div",M,[x,Object(n["O"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"price","onUpdate:modelValue":e[3]||(e[3]=function(t){return a.couponItem.code=t}),placeholder:"請輸入代碼名稱"},null,512),[[n["K"],a.couponItem.code]])]),Object(n["h"])("div",_,[Object(n["h"])("div",D,[Object(n["O"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[4]||(e[4]=function(t){return a.couponItem.is_enabled=t}),id:"is_enabled"},null,512),[[n["J"],a.couponItem.is_enabled,void 0,{number:!0}]]),$])])])]),Object(n["h"])("div",E,[Object(n["h"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[5]||(e[5]=function(e){t.hideModal()})},"取消"),Object(n["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[6]||(e[6]=Object(n["P"])((function(t){return i.getCoupon()}),["prevent"]))},"確認")])])])],512)])}o("fb6a");var V=o("5191"),T={data:function(){return{couponItem:{}}},mixins:[V["a"]],methods:{getCoupon:function(){this.$emit("emitCoupon",this.couponItem)}},props:{coupon:{type:Object,default:function(){return{}}}},computed:{changTime:{get:function(){return this.couponItem.due_date?new Date(this.couponItem.due_date).toISOString().slice(0,10):(new Date).toISOString().slice(0,10)},set:function(t){this.couponItem.due_date=new Date(t).getTime()}}},watch:{coupon:function(){this.couponItem=this.coupon}}},U=o("6b0d"),H=o.n(U);const K=H()(T,[["render",P]]);var N=K,S=o("6ff1"),J=o("1799"),A={inject:["emitter"],data:function(){return{coupons:{},couponsItem:{},pagination:{},isNew:!1}},methods:{getCoupons:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/coupons/?page=").concat(e);this.$http.get(o).then((function(e){t.coupons=e.data,t.pagination=e.data.pagination}))},openModal:function(t,e){this.isNew=t,this.isNew?this.couponsItem={}:(this.couponsItem=e,console.log(this.couponsItem)),this.$refs.couponModel.showModal()},addCoupon:function(t){var e=this;this.$refs.couponModel.hideModal();var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/coupon"),n="post";this.isNew||(o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/coupon/").concat(t.id),n="put"),this.$http[n](o,{data:this.couponsItem}).then((function(t){e.getCoupons(),t.data.success?e.emitter.emit("push-message",{style:"success",title:"更新成功"}):e.emitter.emit("push-message",{style:"danger",title:"更新失敗",content:t.data.message.join("、")})}))},cangeTime:function(t){var e=new Date(t);return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())},OpenDelCoupon:function(t){this.couponsItem=Object(h["a"])({},t),this.$refs.delModal.showModal()},delCoupon:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/coupon/").concat(this.couponsItem.id);this.$http.delete(e).then((function(e){console.log(e.data),t.$refs.delModal.hideModal(),t.getCoupons()}))}},created:function(){this.getCoupons()},components:{CouponModel:N,DelModal:S["a"],PaginationVue:J["a"]}};const F=H()(A,[["render",b]]);e["default"]=F},fb6a:function(t,e,o){"use strict";var n=o("23e7"),c=o("da84"),a=o("e8b5"),i=o("68ee"),l=o("861d"),s=o("23cb"),u=o("07fa"),d=o("fc6a"),p=o("8418"),r=o("b622"),b=o("1dde"),h=o("f36a"),m=b("slice"),O=r("species"),j=c.Array,f=Math.max;n({target:"Array",proto:!0,forced:!m},{slice:function(t,e){var o,n,c,r=d(this),b=u(r),m=s(t,b),g=s(void 0===e?b:e,b);if(a(r)&&(o=r.constructor,i(o)&&(o===j||a(o.prototype))?o=void 0:l(o)&&(o=o[O],null===o&&(o=void 0)),o===j||void 0===o))return h(r,m,g);for(n=new(void 0===o?j:o)(f(g-m,0)),c=0;m<g;m++,c++)m in r&&p(n,c,r[m]);return n.length=c,n}})}}]);
//# sourceMappingURL=chunk-e22f0e44.a7fcc13c.js.map