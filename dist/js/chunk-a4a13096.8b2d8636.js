(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4a13096"],{"057f":function(t,e,c){var n=c("c6b6"),o=c("fc6a"),r=c("241c").f,a=c("4dae"),i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(e){return a(i)}};t.exports.f=function(t){return i&&"Window"==n(t)?s(t):r(o(t))}},"159b":function(t,e,c){var n=c("da84"),o=c("fdbc"),r=c("785a"),a=c("17c2"),i=c("9112"),s=function(t){if(t&&t.forEach!==a)try{i(t,"forEach",a)}catch(e){t.forEach=a}};for(var l in o)o[l]&&s(n[l]&&n[l].prototype);s(r)},"17c2":function(t,e,c){"use strict";var n=c("b727").forEach,o=c("a640"),r=o("forEach");t.exports=r?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"428f":function(t,e,c){var n=c("da84");t.exports=n},"4dae":function(t,e,c){var n=c("da84"),o=c("23cb"),r=c("07fa"),a=c("8418"),i=n.Array,s=Math.max;t.exports=function(t,e,c){for(var n=r(t),l=o(e,n),u=o(void 0===c?n:c,n),d=i(s(u-l,0)),b=0;l<u;l++,b++)a(d,b,t[l]);return d.length=b,d}},"4de4":function(t,e,c){"use strict";var n=c("23e7"),o=c("b727").filter,r=c("1dde"),a=r("filter");n({target:"Array",proto:!0,forced:!a},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));c("b64b"),c("a4d3"),c("4de4"),c("d3b7"),c("e439"),c("159b"),c("dbb4");function n(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function o(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,n)}return c}function r(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?o(Object(c),!0).forEach((function(e){n(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}},"746f":function(t,e,c){var n=c("428f"),o=c("1a2d"),r=c("e538"),a=c("9bf2").f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:r.f(t)})}},a4d3:function(t,e,c){"use strict";var n=c("23e7"),o=c("da84"),r=c("d066"),a=c("2ba4"),i=c("c65b"),s=c("e330"),l=c("c430"),u=c("83ab"),d=c("4930"),b=c("d039"),f=c("1a2d"),p=c("e8b5"),h=c("1626"),m=c("861d"),O=c("3a9b"),j=c("d9b5"),v=c("825a"),g=c("7b0b"),y=c("fc6a"),P=c("a04b"),w=c("577e"),x=c("5c6c"),k=c("7c73"),M=c("df75"),S=c("241c"),U=c("057f"),E=c("7418"),D=c("06cf"),$=c("9bf2"),V=c("37e8"),_=c("d1e7"),C=c("f36a"),L=c("6eeb"),F=c("5692"),I=c("f772"),J=c("d012"),N=c("90e3"),G=c("b622"),A=c("e538"),Q=c("746f"),R=c("d44e"),T=c("69f3"),W=c("b727").forEach,q=I("hidden"),z="Symbol",B="prototype",H=G("toPrimitive"),K=T.set,X=T.getterFor(z),Y=Object[B],Z=o.Symbol,tt=Z&&Z[B],et=o.TypeError,ct=o.QObject,nt=r("JSON","stringify"),ot=D.f,rt=$.f,at=U.f,it=_.f,st=s([].push),lt=F("symbols"),ut=F("op-symbols"),dt=F("string-to-symbol-registry"),bt=F("symbol-to-string-registry"),ft=F("wks"),pt=!ct||!ct[B]||!ct[B].findChild,ht=u&&b((function(){return 7!=k(rt({},"a",{get:function(){return rt(this,"a",{value:7}).a}})).a}))?function(t,e,c){var n=ot(Y,e);n&&delete Y[e],rt(t,e,c),n&&t!==Y&&rt(Y,e,n)}:rt,mt=function(t,e){var c=lt[t]=k(tt);return K(c,{type:z,tag:t,description:e}),u||(c.description=e),c},Ot=function(t,e,c){t===Y&&Ot(ut,e,c),v(t);var n=P(e);return v(c),f(lt,n)?(c.enumerable?(f(t,q)&&t[q][n]&&(t[q][n]=!1),c=k(c,{enumerable:x(0,!1)})):(f(t,q)||rt(t,q,x(1,{})),t[q][n]=!0),ht(t,n,c)):rt(t,n,c)},jt=function(t,e){v(t);var c=y(e),n=M(c).concat(wt(c));return W(n,(function(e){u&&!i(gt,c,e)||Ot(t,e,c[e])})),t},vt=function(t,e){return void 0===e?k(t):jt(k(t),e)},gt=function(t){var e=P(t),c=i(it,this,e);return!(this===Y&&f(lt,e)&&!f(ut,e))&&(!(c||!f(this,e)||!f(lt,e)||f(this,q)&&this[q][e])||c)},yt=function(t,e){var c=y(t),n=P(e);if(c!==Y||!f(lt,n)||f(ut,n)){var o=ot(c,n);return!o||!f(lt,n)||f(c,q)&&c[q][n]||(o.enumerable=!0),o}},Pt=function(t){var e=at(y(t)),c=[];return W(e,(function(t){f(lt,t)||f(J,t)||st(c,t)})),c},wt=function(t){var e=t===Y,c=at(e?ut:y(t)),n=[];return W(c,(function(t){!f(lt,t)||e&&!f(Y,t)||st(n,lt[t])})),n};if(d||(Z=function(){if(O(tt,this))throw et("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?w(arguments[0]):void 0,e=N(t),c=function(t){this===Y&&i(c,ut,t),f(this,q)&&f(this[q],e)&&(this[q][e]=!1),ht(this,e,x(1,t))};return u&&pt&&ht(Y,e,{configurable:!0,set:c}),mt(e,t)},tt=Z[B],L(tt,"toString",(function(){return X(this).tag})),L(Z,"withoutSetter",(function(t){return mt(N(t),t)})),_.f=gt,$.f=Ot,V.f=jt,D.f=yt,S.f=U.f=Pt,E.f=wt,A.f=function(t){return mt(G(t),t)},u&&(rt(tt,"description",{configurable:!0,get:function(){return X(this).description}}),l||L(Y,"propertyIsEnumerable",gt,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:Z}),W(M(ft),(function(t){Q(t)})),n({target:z,stat:!0,forced:!d},{for:function(t){var e=w(t);if(f(dt,e))return dt[e];var c=Z(e);return dt[e]=c,bt[c]=e,c},keyFor:function(t){if(!j(t))throw et(t+" is not a symbol");if(f(bt,t))return bt[t]},useSetter:function(){pt=!0},useSimple:function(){pt=!1}}),n({target:"Object",stat:!0,forced:!d,sham:!u},{create:vt,defineProperty:Ot,defineProperties:jt,getOwnPropertyDescriptor:yt}),n({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Pt,getOwnPropertySymbols:wt}),n({target:"Object",stat:!0,forced:b((function(){E.f(1)}))},{getOwnPropertySymbols:function(t){return E.f(g(t))}}),nt){var xt=!d||b((function(){var t=Z();return"[null]"!=nt([t])||"{}"!=nt({a:t})||"{}"!=nt(Object(t))}));n({target:"JSON",stat:!0,forced:xt},{stringify:function(t,e,c){var n=C(arguments),o=e;if((m(e)||void 0!==t)&&!j(t))return p(e)||(e=function(t,e){if(h(o)&&(e=i(o,this,t,e)),!j(e))return e}),n[1]=e,a(nt,null,n)}})}if(!tt[H]){var kt=tt.valueOf;L(tt,H,(function(t){return i(kt,this)}))}R(Z,z),J[q]=!0},b64b:function(t,e,c){var n=c("23e7"),o=c("7b0b"),r=c("df75"),a=c("d039"),i=a((function(){r(1)}));n({target:"Object",stat:!0,forced:i},{keys:function(t){return r(o(t))}})},b727:function(t,e,c){var n=c("0366"),o=c("e330"),r=c("44ad"),a=c("7b0b"),i=c("07fa"),s=c("65f0"),l=o([].push),u=function(t){var e=1==t,c=2==t,o=3==t,u=4==t,d=6==t,b=7==t,f=5==t||d;return function(p,h,m,O){for(var j,v,g=a(p),y=r(g),P=n(h,m),w=i(y),x=0,k=O||s,M=e?k(p,w):c||b?k(p,0):void 0;w>x;x++)if((f||x in y)&&(j=y[x],v=P(j,x,g),t))if(e)M[x]=v;else if(v)switch(t){case 3:return!0;case 5:return j;case 6:return x;case 2:l(M,j)}else switch(t){case 4:return!1;case 7:l(M,j)}return d?-1:o||u?u:M}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},dbb4:function(t,e,c){var n=c("23e7"),o=c("83ab"),r=c("56ef"),a=c("fc6a"),i=c("06cf"),s=c("8418");n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){var e,c,n=a(t),o=i.f,l=r(n),u={},d=0;while(l.length>d)c=o(n,e=l[d++]),void 0!==c&&s(u,e,c);return u}})},e01a:function(t,e,c){"use strict";var n=c("23e7"),o=c("83ab"),r=c("da84"),a=c("e330"),i=c("1a2d"),s=c("1626"),l=c("3a9b"),u=c("577e"),d=c("9bf2").f,b=c("e893"),f=r.Symbol,p=f&&f.prototype;if(o&&s(f)&&(!("description"in p)||void 0!==f().description)){var h={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),e=l(p,this)?new f(t):void 0===t?f():f(t);return""===t&&(h[e]=!0),e};b(m,f),m.prototype=p,p.constructor=m;var O="Symbol(test)"==String(f("test")),j=a(p.toString),v=a(p.valueOf),g=/^Symbol\((.*)\)[^)]+$/,y=a("".replace),P=a("".slice);d(p,"description",{configurable:!0,get:function(){var t=v(this),e=j(t);if(i(h,t))return"";var c=O?P(e,7,-1):y(e,g,"$1");return""===c?void 0:c}}),n({global:!0,forced:!0},{Symbol:m})}},e439:function(t,e,c){var n=c("23e7"),o=c("d039"),r=c("fc6a"),a=c("06cf").f,i=c("83ab"),s=o((function(){a(1)})),l=!i||s;n({target:"Object",stat:!0,forced:l,sham:!i},{getOwnPropertyDescriptor:function(t,e){return a(r(t),e)}})},e538:function(t,e,c){var n=c("b622");e.f=n},e6dc:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),o={class:"table mt-4"},r=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",{width:"120"},"分類"),Object(n["h"])("th",null,"產品名稱"),Object(n["h"])("th",{width:"120"},"原價"),Object(n["h"])("th",{width:"120"},"售價"),Object(n["h"])("th",{width:"100"},"是否啟用"),Object(n["h"])("th",{width:"200"},"編輯")])],-1),a={class:"text-right"},i={class:"text-right"},s={key:0,class:"text-success"},l={key:1,class:"text-muted"},u={class:"btn-group"},d=["onClick"],b=["onClick"];function f(t,e,c,f,p,h){var m=Object(n["G"])("Loading"),O=Object(n["G"])("PaginationVue"),j=Object(n["G"])("ProductsModal"),v=Object(n["G"])("DelModal");return Object(n["y"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(m,{active:p.isLoading},null,8,["active"]),Object(n["h"])("button",{class:"text-end btn btn-primary",type:"button",onClick:e[0]||(e[0]=Object(n["V"])((function(t){return h.openModal(!0)}),["prevent"]))},"新增產品 "),Object(n["h"])("table",o,[r,Object(n["h"])("tbody",null,[(Object(n["y"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(p.products,(function(e){return Object(n["y"])(),Object(n["g"])("tr",{key:e.id},[Object(n["h"])("td",null,Object(n["J"])(e.category),1),Object(n["h"])("td",null,Object(n["J"])(e.title),1),Object(n["h"])("td",a,Object(n["J"])(t.$filters.currency(e.origin_price)),1),Object(n["h"])("td",i,Object(n["J"])(t.$filters.currency(e.price)),1),Object(n["h"])("td",null,[e.is_enabled?(Object(n["y"])(),Object(n["g"])("span",s,"啟用")):(Object(n["y"])(),Object(n["g"])("span",l,"未啟用"))]),Object(n["h"])("td",null,[Object(n["h"])("div",u,[Object(n["h"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return h.openModal(!1,e)}},"編輯",8,d),Object(n["h"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return h.openDelModal(e)}},"刪除",8,b)])])])})),128))])]),Object(n["k"])(O,{pages:p.pagination,onEmitPages:h.getProducts},null,8,["pages","onEmitPages"]),Object(n["k"])(j,{ref:"productsModal",product:p.tempProduct,onUpdateProduct:h.updateProduct},null,8,["product","onUpdateProduct"]),Object(n["k"])(v,{ref:"delModal",product:p.tempProduct,onDelItem:h.delItem},null,8,["product","onDelItem"])],64)}var p=c("5530"),h=(c("99af"),c("a15b"),c("a4d3"),c("e01a"),{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),m={class:"modal-dialog modal-xl"},O={class:"modal-content border-0"},j=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},"新增產品"),Object(n["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),v={class:"modal-body"},g={class:"row"},y={class:"col-sm-4"},P=Object(n["h"])("div",{class:"mb-3"},[Object(n["h"])("label",{for:"image",class:"form-label"},"輸入圖片網址"),Object(n["h"])("input",{type:"text",class:"form-control",id:"image",placeholder:"請輸入圖片連結"})],-1),w={class:"mb-3"},x=Object(n["h"])("label",{for:"customFile",class:"form-label"},[Object(n["j"])("或 上傳圖片 "),Object(n["h"])("i",{class:"fas fa-spinner fa-spin"})],-1),k=Object(n["i"])('<img class="img-fluid" alt=""><div class="mt-5"><div class="mb-3 input-group"><input type="url" class="form-control form-control" placeholder="請輸入連結"><button type="button" class="btn btn-outline-danger"> 移除 </button></div><div><button class="btn btn-outline-primary btn-sm d-block w-100"> 新增圖片 </button></div></div>',2),M={class:"col-sm-8"},S={class:"mb-3"},U=Object(n["h"])("label",{for:"title",class:"form-label"},"標題",-1),E={class:"row gx-2"},D={class:"mb-3 col-md-6"},$=Object(n["h"])("label",{for:"category",class:"form-label"},"分類",-1),V={class:"mb-3 col-md-6"},_=Object(n["h"])("label",{for:"price",class:"form-label"},"單位",-1),C={class:"row gx-2"},L={class:"mb-3 col-md-6"},F=Object(n["h"])("label",{for:"origin_price",class:"form-label"},"原價",-1),I={class:"mb-3 col-md-6"},J=Object(n["h"])("label",{for:"price",class:"form-label"},"售價",-1),N=Object(n["h"])("hr",null,null,-1),G={class:"mb-3"},A=Object(n["h"])("label",{for:"description",class:"form-label"},"產品描述",-1),Q={class:"mb-3"},R=Object(n["h"])("label",{for:"content",class:"form-label"},"說明內容",-1),T={class:"mb-3"},W={class:"form-check"},q=Object(n["h"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),z={class:"modal-footer"},B=Object(n["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function H(t,e,c,o,r,a){return Object(n["y"])(),Object(n["g"])("div",h,[Object(n["h"])("div",m,[Object(n["h"])("div",O,[j,Object(n["h"])("div",v,[Object(n["h"])("div",g,[Object(n["h"])("div",y,[P,Object(n["h"])("div",w,[x,Object(n["h"])("input",{type:"file",id:"customFile",class:"form-control",onChange:e[0]||(e[0]=function(){return a.uploadFile&&a.uploadFile.apply(a,arguments)}),ref:"fileInput"},null,544)]),k]),Object(n["h"])("div",M,[Object(n["h"])("div",S,[U,Object(n["U"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[1]||(e[1]=function(t){return r.tempProduct.title=t}),placeholder:"請輸入標題"},null,512),[[n["O"],r.tempProduct.title]])]),Object(n["h"])("div",E,[Object(n["h"])("div",D,[$,Object(n["U"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":e[2]||(e[2]=function(t){return r.tempProduct.category=t}),placeholder:"請輸入分類"},null,512),[[n["O"],r.tempProduct.category]])]),Object(n["h"])("div",V,[_,Object(n["U"])(Object(n["h"])("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":e[3]||(e[3]=function(t){return r.tempProduct.unit=t}),placeholder:"請輸入單位"},null,512),[[n["O"],r.tempProduct.unit]])])]),Object(n["h"])("div",C,[Object(n["h"])("div",L,[F,Object(n["U"])(Object(n["h"])("input",{type:"number",class:"form-control",id:"origin_price","onUpdate:modelValue":e[4]||(e[4]=function(t){return r.tempProduct.origin_price=t}),placeholder:"請輸入原價"},null,512),[[n["O"],r.tempProduct.origin_price]])]),Object(n["h"])("div",I,[J,Object(n["U"])(Object(n["h"])("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":e[5]||(e[5]=function(t){return r.tempProduct.price=t}),placeholder:"請輸入售價"},null,512),[[n["O"],r.tempProduct.price]])])]),N,Object(n["h"])("div",G,[A,Object(n["U"])(Object(n["h"])("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":e[6]||(e[6]=function(t){return r.tempProduct.description=t}),placeholder:"請輸入產品描述"},null,512),[[n["O"],r.tempProduct.description]])]),Object(n["h"])("div",Q,[R,Object(n["U"])(Object(n["h"])("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":e[7]||(e[7]=function(t){return r.tempProduct.content=t}),placeholder:"請輸入產品說明內容"},null,512),[[n["O"],r.tempProduct.content]])]),Object(n["h"])("div",T,[Object(n["h"])("div",W,[Object(n["U"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=function(t){return r.tempProduct.is_enabled=t}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[n["M"],r.tempProduct.is_enabled]]),q])])])])]),Object(n["h"])("div",z,[B,Object(n["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[9]||(e[9]=function(e){return t.$emit("update-product",r.tempProduct)})},"確認")])])])],512)}var K=c("5191"),X={mixins:[K["a"]],props:{product:{type:Object,default:function(){return{}}}},watch:{product:function(){this.tempProduct=this.product}},data:function(){return{modal:{},tempProduct:{}}},methods:{uploadFile:function(){var t=this,e=this.$refs.fileInput.files[0],c=new FormData;c.append("file-to-upload",e);var n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/upload");this.$http.post(n,c).then((function(e){e.data.success&&(t.tempProduct.imageUrl=e.data.imageUrl)}))}}},Y=c("6b0d"),Z=c.n(Y);const tt=Z()(X,[["render",H]]);var et=tt,ct=c("6ff1"),nt=c("1799"),ot={data:function(){return{products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1}},components:{ProductsModal:et,DelModal:ct["a"],PaginationVue:nt["a"]},inject:["emitter"],methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/products/?page=").concat(e);this.isLoading=!0,this.$http.get(c).then((function(e){t.isLoading=!1,e.data.success&&(t.products=e.data.products,t.pagination=e.data.pagination)}))},openModal:function(t,e){this.isNew=t,this.tempProduct=t?{}:Object(p["a"])({},e),this.$refs.productsModal.showModal()},updateProduct:function(t){var e=this;this.tempProduct=t;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/product"),n="post";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/product/").concat(t.id),n="put");var o=this.$refs.productsModal;this.isLoading=!0,this.$http[n](c,{data:this.tempProduct}).then((function(t){e.isLoading=!1,o.hideModal(),t.data.success?(e.getProducts(),e.emitter.emit("push-message",{style:"success",title:"更新成功"})):e.emitter.emit("push-message",{style:"danger",title:"更新失敗",content:t.data.message.join("、")})}))},openDelModal:function(t){this.tempProduct=Object(p["a"])({},t),this.$refs.delModal.showModal()},delItem:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/product/").concat(this.tempProduct.id);this.$http.delete(e).then((function(e){t.$refs.delModal.hideModal(),e.data.success?(t.getProducts(),t.emitter.emit("push-message",{style:"success",title:"刪除成功"})):t.emitter.emit("push-message",{style:"danger",title:"刪除失敗",content:e.data.message})}))}},created:function(){this.getProducts()}};const rt=Z()(ot,[["render",f]]);e["default"]=rt}}]);
//# sourceMappingURL=chunk-a4a13096.8b2d8636.js.map