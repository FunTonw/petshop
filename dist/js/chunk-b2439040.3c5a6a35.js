(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b2439040"],{b0c0:function(e,t,c){var r=c("83ab"),n=c("5e77").EXISTS,o=c("e330"),a=c("9bf2").f,l=Function.prototype,s=o(l.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=o(d.exec),b="name";r&&!n&&a(l,b,{configurable:!0,get:function(){try{return i(d,s(this))[1]}catch(e){return""}}})},cf2a:function(e,t,c){"use strict";c.r(t);c("b0c0");var r=c("7a23"),n={class:"container"},o={class:"table mt-4"},a=Object(r["h"])("thead",null,[Object(r["h"])("tr",null,[Object(r["h"])("th",{width:"100"},"訂單編號"),Object(r["h"])("th",{width:"120"},"訂單日期"),Object(r["h"])("th",null,"收件人姓名"),Object(r["h"])("th",{width:"120"},"收件方法"),Object(r["h"])("th",{width:"120"},"收件人電話"),Object(r["h"])("th",{width:"100"},"是否付款"),Object(r["h"])("th",{width:"200"},"編輯")])],-1),l={class:"text-right"},s={class:"text-right"},d={key:0,class:"text-success"},i={key:1,class:"text-success"},b={class:"btn-group"},u=["onClick"],h=["onClick"];function O(e,t,c,O,j,m){var p=Object(r["G"])("PaginationVue"),f=Object(r["G"])("OrderModel"),g=Object(r["G"])("DelModal");return Object(r["y"])(),Object(r["g"])(r["a"],null,[Object(r["h"])("div",n,[Object(r["h"])("table",o,[a,Object(r["h"])("tbody",null,[(Object(r["y"])(!0),Object(r["g"])(r["a"],null,Object(r["E"])(j.orders,(function(e){return Object(r["y"])(),Object(r["g"])("tr",{key:e.due_data},[Object(r["h"])("td",null,Object(r["J"])(e.num),1),Object(r["h"])("td",null,Object(r["J"])(m.cangeTime(e.create_at)),1),Object(r["h"])("td",null,Object(r["J"])(e.user.name),1),Object(r["h"])("td",l,Object(r["J"])(e.user.payment_method),1),Object(r["h"])("td",s,Object(r["J"])(e.user.tel),1),Object(r["h"])("td",null,[e.is_paid?(Object(r["y"])(),Object(r["g"])("span",d,"付款完成")):(Object(r["y"])(),Object(r["g"])("span",i,"尚未付款"))]),Object(r["h"])("td",null,[Object(r["h"])("div",b,[Object(r["h"])("button",{class:"btn btn-outline-primary btn-sm",onClick:Object(r["V"])((function(t){return m.openModal(j.isNew,e)}),["prevent"])},"編輯",8,u),Object(r["h"])("button",{class:"btn btn-outline-danger btn-sm",onClick:Object(r["V"])((function(t){return m.delOrder(e)}),["prevent"])},"刪除",8,h)])])])})),128))])]),Object(r["k"])(p,{pages:j.pagination,onEmitPages:m.getOrder},null,8,["pages","onEmitPages"]),Object(r["k"])(f,{ref:"orderModel",order:j.ordersItem,onEmitOrder:m.updateOrder},null,8,["order","onEmitOrder"])]),Object(r["k"])(g,{ref:"delModal",product:j.ordersItem,onDelItem:m.delOrder},null,8,["product","onDelItem"])],64)}c("99af"),c("a15b");var j={class:"modal",tabindex:"-1",ref:"modal"},m={class:"modal-dialog"},p={class:"modal-content"},f=Object(r["h"])("div",{class:"modal-header"},[Object(r["h"])("h5",{class:"modal-title"},"編輯訂單"),Object(r["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),g={class:"modal-body"},y={class:"row"},v={class:"mb-3 col-6"},w=Object(r["h"])("label",{for:"title",class:"form-label"},"收件人姓名",-1),I={class:"mb-3 col-6"},k=Object(r["h"])("label",{for:"email",class:"form-label"},"收件人信箱",-1),M={class:"mb-3 col-6"},x=Object(r["h"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),_={class:"mb-3 col-6"},J=Object(r["h"])("label",{for:"payment_method",class:"form-label"},"付款方式",-1),U=["value"],V={class:"mb-3 col-12"},$=Object(r["h"])("label",{for:"address",class:"form-label"},"收件人地址",-1),E=Object(r["h"])("p",null,"商品項目",-1),C={class:"mb-3",style:{height:"150px",overflow:"auto"}},D={class:"table"},N=Object(r["h"])("thead",null,[Object(r["h"])("tr",null,[Object(r["h"])("th",null,"商品名稱"),Object(r["h"])("th",null,"商品數量"),Object(r["h"])("th",null,"商品價格")])],-1),P={class:"fw-bold"},S={class:"mb-3"},T={class:"form-check"},G=Object(r["h"])("label",{class:"form-check-label",for:"is_paid"}," 是否付款 ",-1),F={class:"modal-footer"};function q(e,t,c,n,o,a){return Object(r["y"])(),Object(r["g"])("div",null,[Object(r["h"])("div",j,[Object(r["h"])("div",m,[Object(r["h"])("div",p,[f,Object(r["h"])("div",g,[Object(r["h"])("div",y,[Object(r["h"])("div",v,[w,Object(r["U"])(Object(r["h"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.orderItem.user.name=e}),placeholder:"請輸入姓名"},null,512),[[r["O"],o.orderItem.user.name]])]),Object(r["h"])("div",I,[k,Object(r["U"])(Object(r["h"])("input",{type:"text",class:"form-control",id:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.orderItem.user.email=e}),placeholder:"請輸入信箱"},null,512),[[r["O"],o.orderItem.user.email]])]),Object(r["h"])("div",M,[x,Object(r["U"])(Object(r["h"])("input",{type:"text",class:"form-control",id:"tel","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.orderItem.user.tel=e}),placeholder:"請輸入電話"},null,512),[[r["O"],o.orderItem.user.tel]])]),Object(r["h"])("div",_,[J,Object(r["U"])(Object(r["h"])("select",{class:"form-select",id:"payment_method","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.orderItem.user.payment_method=e})},[(Object(r["y"])(!0),Object(r["g"])(r["a"],null,Object(r["E"])(o.payMethods,(function(e){return Object(r["y"])(),Object(r["g"])("option",{key:e,value:e},Object(r["J"])(e),9,U)})),128))],512),[[r["N"],o.orderItem.user.payment_method]])]),Object(r["h"])("div",V,[$,Object(r["U"])(Object(r["h"])("input",{type:"text",class:"form-control",id:"address","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.orderItem.user.address=e}),placeholder:"請輸入地址"},null,512),[[r["O"],o.orderItem.user.address]])]),E,Object(r["h"])("div",C,[Object(r["h"])("table",D,[N,Object(r["h"])("tbody",null,[(Object(r["y"])(!0),Object(r["g"])(r["a"],null,Object(r["E"])(o.orderItem.products,(function(t){return Object(r["y"])(),Object(r["g"])("tr",{key:t},[Object(r["h"])("th",null,Object(r["J"])(t.product.title),1),Object(r["h"])("th",null,Object(r["J"])(t.qty),1),Object(r["h"])("th",null,"$"+Object(r["J"])(e.$filters.currency(t.final_total)),1)])})),128))])])]),Object(r["h"])("p",P,"總金額 : $"+Object(r["J"])(e.$filters.currency(o.orderItem.total)),1),Object(r["h"])("div",S,[Object(r["h"])("div",T,[Object(r["U"])(Object(r["h"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=function(e){return o.orderItem.is_paid=e}),id:"is_paid"},null,512),[[r["M"],o.orderItem.is_paid]]),G])])])]),Object(r["h"])("div",F,[Object(r["h"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[6]||(t[6]=function(t){e.hideModal()})},"取消"),Object(r["h"])("button",{type:"button",class:"btn btn-danger",onClick:t[7]||(t[7]=Object(r["V"])((function(e){return a.getOrder()}),["prevent"]))},"確認")])])])],512)])}var A=c("5191"),X={data:function(){return{orderItem:{user:{}},payMethods:["ATM轉帳","信用卡","超商取貨"]}},mixins:[A["a"]],methods:{getOrder:function(){this.$emit("emitOrder",this.orderItem)}},props:{order:{type:Object}},watch:{order:function(){this.orderItem=this.order}}},Y=c("6b0d"),z=c.n(Y);const B=z()(X,[["render",q]]);var H=B,K=c("1799"),L=c("6ff1"),Q={inject:["emitter"],components:{OrderModel:H,PaginationVue:K["a"],DelModal:L["a"]},data:function(){return{orders:[],ordersItem:{},pagination:{},isNew:!1}},methods:{getOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/orders/?page=").concat(t);this.$http.get(c).then((function(t){t.data.success&&(e.orders=t.data.orders,e.pagination=t.data.pagination)}))},cangeTime:function(e){var t=new Date(1e3*e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())},openModal:function(e,t){this.isNew=e,this.isNew?this.ordersItem={}:this.ordersItem=t,this.$refs.orderModel.showModal()},updateOrder:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/order/").concat(e.id);this.$http.put(c,{data:e}).then((function(e){t.$refs.orderModel.hideModal(),e.data.success?(t.getOrder(),t.emitter.emit("push-message",{style:"success",title:"更新成功"})):t.emitter.emit("push-message",{style:"danger",title:"更新失敗",content:e.data.message.join("、")})}))},delOrder:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/order/").concat(e.id);this.$http.delete(c).then((function(e){t.$refs.delModal.hideModal(),e.data.success?(console.log(e.data),t.emitter.emit("push-message",{style:"success",title:"刪除成功"})):t.emitter.emit("push-message",{style:"danger",title:"刪除失敗",content:e.data.message}),t.getOrder()}))}},created:function(){this.getOrder()}};const R=z()(Q,[["render",O]]);t["default"]=R}}]);
//# sourceMappingURL=chunk-b2439040.3c5a6a35.js.map