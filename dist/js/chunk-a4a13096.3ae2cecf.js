(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4a13096"],{"057f":function(t,e,c){var n=c("c6b6"),o=c("fc6a"),r=c("241c").f,i=c("4dae"),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(e){return i(a)}};t.exports.f=function(t){return a&&"Window"==n(t)?s(t):r(o(t))}},"159b":function(t,e,c){var n=c("da84"),o=c("fdbc"),r=c("785a"),i=c("17c2"),a=c("9112"),s=function(t){if(t&&t.forEach!==i)try{a(t,"forEach",i)}catch(e){t.forEach=i}};for(var l in o)o[l]&&s(n[l]&&n[l].prototype);s(r)},"17c2":function(t,e,c){"use strict";var n=c("b727").forEach,o=c("a640"),r=o("forEach");t.exports=r?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"428f":function(t,e,c){var n=c("da84");t.exports=n},"4dae":function(t,e,c){var n=c("da84"),o=c("23cb"),r=c("07fa"),i=c("8418"),a=n.Array,s=Math.max;t.exports=function(t,e,c){for(var n=r(t),l=o(e,n),u=o(void 0===c?n:c,n),d=a(s(u-l,0)),b=0;l<u;l++,b++)i(d,b,t[l]);return d.length=b,d}},"4de4":function(t,e,c){"use strict";var n=c("23e7"),o=c("b727").filter,r=c("1dde"),i=r("filter");n({target:"Array",proto:!0,forced:!i},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));c("b64b"),c("a4d3"),c("4de4"),c("d3b7"),c("e439"),c("159b"),c("dbb4");function n(t,e,c){return e in t?Object.defineProperty(t,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[e]=c,t}function o(t,e){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),c.push.apply(c,n)}return c}function r(t){for(var e=1;e<arguments.length;e++){var c=null!=arguments[e]?arguments[e]:{};e%2?o(Object(c),!0).forEach((function(e){n(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}},"746f":function(t,e,c){var n=c("428f"),o=c("1a2d"),r=c("e538"),i=c("9bf2").f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||i(e,t,{value:r.f(t)})}},a4d3:function(t,e,c){"use strict";var n=c("23e7"),o=c("da84"),r=c("d066"),i=c("2ba4"),a=c("c65b"),s=c("e330"),l=c("c430"),u=c("83ab"),d=c("4930"),b=c("d039"),f=c("1a2d"),p=c("e8b5"),m=c("1626"),h=c("861d"),O=c("3a9b"),j=c("d9b5"),v=c("825a"),g=c("7b0b"),y=c("fc6a"),P=c("a04b"),w=c("577e"),x=c("5c6c"),M=c("7c73"),k=c("df75"),S=c("241c"),D=c("057f"),E=c("7418"),$=c("06cf"),L=c("9bf2"),I=c("37e8"),U=c("d1e7"),V=c("f36a"),_=c("6eeb"),C=c("5692"),W=c("f772"),A=c("d012"),F=c("90e3"),N=c("b622"),Q=c("e538"),J=c("746f"),G=c("d44e"),R=c("69f3"),T=c("b727").forEach,X=W("hidden"),q="Symbol",z="prototype",B=N("toPrimitive"),H=R.set,K=R.getterFor(q),Y=Object[z],Z=o.Symbol,tt=Z&&Z[z],et=o.TypeError,ct=o.QObject,nt=r("JSON","stringify"),ot=$.f,rt=L.f,it=D.f,at=U.f,st=s([].push),lt=C("symbols"),ut=C("op-symbols"),dt=C("string-to-symbol-registry"),bt=C("symbol-to-string-registry"),ft=C("wks"),pt=!ct||!ct[z]||!ct[z].findChild,mt=u&&b((function(){return 7!=M(rt({},"a",{get:function(){return rt(this,"a",{value:7}).a}})).a}))?function(t,e,c){var n=ot(Y,e);n&&delete Y[e],rt(t,e,c),n&&t!==Y&&rt(Y,e,n)}:rt,ht=function(t,e){var c=lt[t]=M(tt);return H(c,{type:q,tag:t,description:e}),u||(c.description=e),c},Ot=function(t,e,c){t===Y&&Ot(ut,e,c),v(t);var n=P(e);return v(c),f(lt,n)?(c.enumerable?(f(t,X)&&t[X][n]&&(t[X][n]=!1),c=M(c,{enumerable:x(0,!1)})):(f(t,X)||rt(t,X,x(1,{})),t[X][n]=!0),mt(t,n,c)):rt(t,n,c)},jt=function(t,e){v(t);var c=y(e),n=k(c).concat(wt(c));return T(n,(function(e){u&&!a(gt,c,e)||Ot(t,e,c[e])})),t},vt=function(t,e){return void 0===e?M(t):jt(M(t),e)},gt=function(t){var e=P(t),c=a(at,this,e);return!(this===Y&&f(lt,e)&&!f(ut,e))&&(!(c||!f(this,e)||!f(lt,e)||f(this,X)&&this[X][e])||c)},yt=function(t,e){var c=y(t),n=P(e);if(c!==Y||!f(lt,n)||f(ut,n)){var o=ot(c,n);return!o||!f(lt,n)||f(c,X)&&c[X][n]||(o.enumerable=!0),o}},Pt=function(t){var e=it(y(t)),c=[];return T(e,(function(t){f(lt,t)||f(A,t)||st(c,t)})),c},wt=function(t){var e=t===Y,c=it(e?ut:y(t)),n=[];return T(c,(function(t){!f(lt,t)||e&&!f(Y,t)||st(n,lt[t])})),n};if(d||(Z=function(){if(O(tt,this))throw et("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?w(arguments[0]):void 0,e=F(t),c=function(t){this===Y&&a(c,ut,t),f(this,X)&&f(this[X],e)&&(this[X][e]=!1),mt(this,e,x(1,t))};return u&&pt&&mt(Y,e,{configurable:!0,set:c}),ht(e,t)},tt=Z[z],_(tt,"toString",(function(){return K(this).tag})),_(Z,"withoutSetter",(function(t){return ht(F(t),t)})),U.f=gt,L.f=Ot,I.f=jt,$.f=yt,S.f=D.f=Pt,E.f=wt,Q.f=function(t){return ht(N(t),t)},u&&(rt(tt,"description",{configurable:!0,get:function(){return K(this).description}}),l||_(Y,"propertyIsEnumerable",gt,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:Z}),T(k(ft),(function(t){J(t)})),n({target:q,stat:!0,forced:!d},{for:function(t){var e=w(t);if(f(dt,e))return dt[e];var c=Z(e);return dt[e]=c,bt[c]=e,c},keyFor:function(t){if(!j(t))throw et(t+" is not a symbol");if(f(bt,t))return bt[t]},useSetter:function(){pt=!0},useSimple:function(){pt=!1}}),n({target:"Object",stat:!0,forced:!d,sham:!u},{create:vt,defineProperty:Ot,defineProperties:jt,getOwnPropertyDescriptor:yt}),n({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Pt,getOwnPropertySymbols:wt}),n({target:"Object",stat:!0,forced:b((function(){E.f(1)}))},{getOwnPropertySymbols:function(t){return E.f(g(t))}}),nt){var xt=!d||b((function(){var t=Z();return"[null]"!=nt([t])||"{}"!=nt({a:t})||"{}"!=nt(Object(t))}));n({target:"JSON",stat:!0,forced:xt},{stringify:function(t,e,c){var n=V(arguments),o=e;if((h(e)||void 0!==t)&&!j(t))return p(e)||(e=function(t,e){if(m(o)&&(e=a(o,this,t,e)),!j(e))return e}),n[1]=e,i(nt,null,n)}})}if(!tt[B]){var Mt=tt.valueOf;_(tt,B,(function(t){return a(Mt,this)}))}G(Z,q),A[X]=!0},b64b:function(t,e,c){var n=c("23e7"),o=c("7b0b"),r=c("df75"),i=c("d039"),a=i((function(){r(1)}));n({target:"Object",stat:!0,forced:a},{keys:function(t){return r(o(t))}})},b727:function(t,e,c){var n=c("0366"),o=c("e330"),r=c("44ad"),i=c("7b0b"),a=c("07fa"),s=c("65f0"),l=o([].push),u=function(t){var e=1==t,c=2==t,o=3==t,u=4==t,d=6==t,b=7==t,f=5==t||d;return function(p,m,h,O){for(var j,v,g=i(p),y=r(g),P=n(m,h),w=a(y),x=0,M=O||s,k=e?M(p,w):c||b?M(p,0):void 0;w>x;x++)if((f||x in y)&&(j=y[x],v=P(j,x,g),t))if(e)k[x]=v;else if(v)switch(t){case 3:return!0;case 5:return j;case 6:return x;case 2:l(k,j)}else switch(t){case 4:return!1;case 7:l(k,j)}return d?-1:o||u?u:k}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},dbb4:function(t,e,c){var n=c("23e7"),o=c("83ab"),r=c("56ef"),i=c("fc6a"),a=c("06cf"),s=c("8418");n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){var e,c,n=i(t),o=a.f,l=r(n),u={},d=0;while(l.length>d)c=o(n,e=l[d++]),void 0!==c&&s(u,e,c);return u}})},e01a:function(t,e,c){"use strict";var n=c("23e7"),o=c("83ab"),r=c("da84"),i=c("e330"),a=c("1a2d"),s=c("1626"),l=c("3a9b"),u=c("577e"),d=c("9bf2").f,b=c("e893"),f=r.Symbol,p=f&&f.prototype;if(o&&s(f)&&(!("description"in p)||void 0!==f().description)){var m={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),e=l(p,this)?new f(t):void 0===t?f():f(t);return""===t&&(m[e]=!0),e};b(h,f),h.prototype=p,p.constructor=h;var O="Symbol(test)"==String(f("test")),j=i(p.toString),v=i(p.valueOf),g=/^Symbol\((.*)\)[^)]+$/,y=i("".replace),P=i("".slice);d(p,"description",{configurable:!0,get:function(){var t=v(this),e=j(t);if(a(m,t))return"";var c=O?P(e,7,-1):y(e,g,"$1");return""===c?void 0:c}}),n({global:!0,forced:!0},{Symbol:h})}},e439:function(t,e,c){var n=c("23e7"),o=c("d039"),r=c("fc6a"),i=c("06cf").f,a=c("83ab"),s=o((function(){i(1)})),l=!a||s;n({target:"Object",stat:!0,forced:l,sham:!a},{getOwnPropertyDescriptor:function(t,e){return i(r(t),e)}})},e538:function(t,e,c){var n=c("b622");e.f=n},e6dc:function(t,e,c){"use strict";c.r(e);var n=c("7a23"),o={class:"table mt-4"},r=Object(n["i"])("thead",null,[Object(n["i"])("tr",null,[Object(n["i"])("th",{width:"120"},"分類"),Object(n["i"])("th",null,"產品名稱"),Object(n["i"])("th",{width:"120"},"原價"),Object(n["i"])("th",{width:"120"},"售價"),Object(n["i"])("th",{width:"100"},"是否啟用"),Object(n["i"])("th",{width:"200"},"編輯")])],-1),i={class:"text-right"},a={class:"text-right"},s={key:0,class:"text-success"},l={key:1,class:"text-muted"},u={class:"btn-group"},d=["onClick"],b=["onClick"];function f(t,e,c,f,p,m){var h=Object(n["I"])("Loading"),O=Object(n["I"])("PaginationVue"),j=Object(n["I"])("ProductsModal"),v=Object(n["I"])("DelModal");return Object(n["A"])(),Object(n["h"])(n["a"],null,[Object(n["l"])(h,{active:p.isLoading},null,8,["active"]),Object(n["i"])("button",{class:"text-end btn btn-primary",type:"button",onClick:e[0]||(e[0]=Object(n["X"])((function(t){return m.openModal(!0)}),["prevent"]))},"新增產品 "),Object(n["i"])("table",o,[r,Object(n["i"])("tbody",null,[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["G"])(p.products,(function(e){return Object(n["A"])(),Object(n["h"])("tr",{key:e.id},[Object(n["i"])("td",null,Object(n["L"])(e.category),1),Object(n["i"])("td",null,Object(n["L"])(e.title),1),Object(n["i"])("td",i,Object(n["L"])(t.$filters.currency(e.origin_price)),1),Object(n["i"])("td",a,Object(n["L"])(t.$filters.currency(e.price)),1),Object(n["i"])("td",null,[e.is_enabled?(Object(n["A"])(),Object(n["h"])("span",s,"啟用")):(Object(n["A"])(),Object(n["h"])("span",l,"未啟用"))]),Object(n["i"])("td",null,[Object(n["i"])("div",u,[Object(n["i"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return m.openModal(!1,e)}},"編輯",8,d),Object(n["i"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return m.openDelModal(e)}},"刪除",8,b)])])])})),128))])]),Object(n["l"])(O,{pages:p.pagination,onEmitPages:m.getProducts},null,8,["pages","onEmitPages"]),Object(n["l"])(j,{ref:"productsModal",product:p.tempProduct,onUpdateProduct:m.updateProduct},null,8,["product","onUpdateProduct"]),Object(n["l"])(v,{ref:"delModal",product:p.tempProduct,onDelItem:m.delItem},null,8,["product","onDelItem"])],64)}var p=c("5530"),m=(c("99af"),c("a15b"),c("a4d3"),c("e01a"),{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),h={class:"modal-dialog modal-xl"},O={class:"modal-content border-0"},j=Object(n["i"])("div",{class:"modal-header"},[Object(n["i"])("h5",{class:"modal-title",id:"exampleModalLabel"},"新增產品"),Object(n["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),v={class:"modal-body"},g={class:"row"},y={class:"col-sm-4"},P=Object(n["i"])("div",{class:"mb-3"},[Object(n["i"])("label",{for:"image",class:"form-label"},"輸入圖片網址"),Object(n["i"])("input",{type:"text",class:"form-control",id:"image",placeholder:"請輸入圖片連結"})],-1),w={class:"mb-3"},x=Object(n["i"])("label",{for:"customFile",class:"form-label"},[Object(n["k"])("或 上傳圖片 "),Object(n["i"])("i",{class:"fas fa-spinner fa-spin"})],-1),M=Object(n["j"])('<img class="img-fluid" alt=""><div class="mt-5"><div class="mb-3 input-group"><input type="url" class="form-control form-control" placeholder="請輸入連結"><button type="button" class="btn btn-outline-danger"> 移除 </button></div><div><button class="btn btn-outline-primary btn-sm d-block w-100"> 新增圖片 </button></div></div>',2),k={class:"col-sm-8"},S={class:"mb-3"},D=Object(n["i"])("label",{for:"title",class:"form-label"},"標題",-1),E={class:"row gx-2"},$={class:"mb-3 col-md-6"},L=Object(n["i"])("label",{for:"category",class:"form-label"},"分類",-1),I={class:"mb-3 col-md-6"},U=Object(n["i"])("label",{for:"price",class:"form-label"},"單位",-1),V={class:"row gx-2"},_={class:"mb-3 col-md-6"},C=Object(n["i"])("label",{for:"origin_price",class:"form-label"},"原價",-1),W={class:"mb-3 col-md-6"},A=Object(n["i"])("label",{for:"price",class:"form-label"},"售價",-1),F=Object(n["i"])("hr",null,null,-1),N={class:"mb-3"},Q=Object(n["i"])("label",{for:"description",class:"form-label"},"產品描述",-1),J={class:"mb-3"},G=Object(n["i"])("label",{for:"content",class:"form-label"},"說明內容",-1),R={class:"mb-3"},T={class:"form-check"},X=Object(n["i"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),q={class:"modal-footer"},z=Object(n["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function B(t,e,c,o,r,i){return Object(n["A"])(),Object(n["h"])("div",m,[Object(n["i"])("div",h,[Object(n["i"])("div",O,[j,Object(n["i"])("div",v,[Object(n["i"])("div",g,[Object(n["i"])("div",y,[P,Object(n["i"])("div",w,[x,Object(n["i"])("input",{type:"file",id:"customFile",class:"form-control",onChange:e[0]||(e[0]=function(){return i.uploadFile&&i.uploadFile.apply(i,arguments)}),ref:"fileInput"},null,544)]),M]),Object(n["i"])("div",k,[Object(n["i"])("div",S,[D,Object(n["W"])(Object(n["i"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[1]||(e[1]=function(t){return r.tempProduct.title=t}),placeholder:"請輸入標題"},null,512),[[n["Q"],r.tempProduct.title]])]),Object(n["i"])("div",E,[Object(n["i"])("div",$,[L,Object(n["W"])(Object(n["i"])("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":e[2]||(e[2]=function(t){return r.tempProduct.category=t}),placeholder:"請輸入分類"},null,512),[[n["Q"],r.tempProduct.category]])]),Object(n["i"])("div",I,[U,Object(n["W"])(Object(n["i"])("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":e[3]||(e[3]=function(t){return r.tempProduct.unit=t}),placeholder:"請輸入單位"},null,512),[[n["Q"],r.tempProduct.unit]])])]),Object(n["i"])("div",V,[Object(n["i"])("div",_,[C,Object(n["W"])(Object(n["i"])("input",{type:"number",class:"form-control",id:"origin_price","onUpdate:modelValue":e[4]||(e[4]=function(t){return r.tempProduct.origin_price=t}),placeholder:"請輸入原價"},null,512),[[n["Q"],r.tempProduct.origin_price]])]),Object(n["i"])("div",W,[A,Object(n["W"])(Object(n["i"])("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":e[5]||(e[5]=function(t){return r.tempProduct.price=t}),placeholder:"請輸入售價"},null,512),[[n["Q"],r.tempProduct.price]])])]),F,Object(n["i"])("div",N,[Q,Object(n["W"])(Object(n["i"])("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":e[6]||(e[6]=function(t){return r.tempProduct.description=t}),placeholder:"請輸入產品描述"},null,512),[[n["Q"],r.tempProduct.description]])]),Object(n["i"])("div",J,[G,Object(n["W"])(Object(n["i"])("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":e[7]||(e[7]=function(t){return r.tempProduct.content=t}),placeholder:"請輸入產品說明內容"},null,512),[[n["Q"],r.tempProduct.content]])]),Object(n["i"])("div",R,[Object(n["i"])("div",T,[Object(n["W"])(Object(n["i"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=function(t){return r.tempProduct.is_enabled=t}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[n["O"],r.tempProduct.is_enabled]]),X])])])])]),Object(n["i"])("div",q,[z,Object(n["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[9]||(e[9]=function(e){return t.$emit("update-product",r.tempProduct)})},"確認")])])])],512)}var H=c("5191"),K={mixins:[H["a"]],props:{product:{type:Object,default:function(){return{}}}},watch:{product:function(){this.tempProduct=this.product}},data:function(){return{modal:{},tempProduct:{}}},methods:{uploadFile:function(){var t=this,e=this.$refs.fileInput.files[0],c=new FormData;c.append("file-to-upload",e);var n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/upload");this.$http.post(n,c).then((function(e){e.data.success&&(t.tempProduct.imageUrl=e.data.imageUrl)}))}}},Y=c("6b0d"),Z=c.n(Y);const tt=Z()(K,[["render",B]]);var et=tt,ct=c("6ff1"),nt=c("1799"),ot={data:function(){return{products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1}},components:{ProductsModal:et,DelModal:ct["a"],PaginationVue:nt["a"]},inject:["emitter"],methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/products/?page=").concat(e);this.isLoading=!0,this.$http.get(c).then((function(e){t.isLoading=!1,e.data.success&&(t.products=e.data.products,t.pagination=e.data.pagination)}))},openModal:function(t,e){this.isNew=t,this.tempProduct=t?{}:Object(p["a"])({},e),this.$refs.productsModal.showModal()},updateProduct:function(t){var e=this;this.tempProduct=t;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/product"),n="post";this.isNew||(c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/product/").concat(t.id),n="put");var o=this.$refs.productsModal;this.isLoading=!0,this.$http[n](c,{data:this.tempProduct}).then((function(t){e.isLoading=!1,o.hideModal(),t.data.success?(e.getProducts(),e.emitter.emit("push-message",{style:"success",title:"更新成功"})):e.emitter.emit("push-message",{style:"danger",title:"更新失敗",content:t.data.message.join("、")})}))},openDelModal:function(t){this.tempProduct=Object(p["a"])({},t),this.$refs.delModal.showModal()},delItem:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/admin/product/").concat(this.tempProduct.id);this.$http.delete(e).then((function(e){t.$refs.delModal.hideModal(),e.data.success?(t.getProducts(),t.emitter.emit("push-message",{style:"success",title:"刪除成功"})):t.emitter.emit("push-message",{style:"danger",title:"刪除失敗",content:e.data.message})}))}},created:function(){this.getProducts()}};const rt=Z()(ot,[["render",f]]);e["default"]=rt}}]);
//# sourceMappingURL=chunk-a4a13096.3ae2cecf.js.map