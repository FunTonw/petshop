(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-648dcb06"],{"0b42":function(t,c,e){var n=e("da84"),o=e("e8b5"),i=e("68ee"),a=e("861d"),r=e("b622"),s=r("species"),l=n.Array;t.exports=function(t){var c;return o(t)&&(c=t.constructor,i(c)&&(c===l||o(c.prototype))?c=void 0:a(c)&&(c=c[s],null===c&&(c=void 0))),void 0===c?l:c}},"159b":function(t,c,e){var n=e("da84"),o=e("fdbc"),i=e("785a"),a=e("17c2"),r=e("9112"),s=function(t){if(t&&t.forEach!==a)try{r(t,"forEach",a)}catch(c){t.forEach=a}};for(var l in o)o[l]&&s(n[l]&&n[l].prototype);s(i)},"17c2":function(t,c,e){"use strict";var n=e("b727").forEach,o=e("a640"),i=o("forEach");t.exports=i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,c,e){var n=e("d039"),o=e("b622"),i=e("2d00"),a=o("species");t.exports=function(t){return i>=51||!n((function(){var c=[],e=c.constructor={};return e[a]=function(){return{foo:1}},1!==c[t](Boolean).foo}))}},"3e1f":function(t,c,e){},"4de4":function(t,c,e){"use strict";var n=e("23e7"),o=e("b727").filter,i=e("1dde"),a=i("filter");n({target:"Array",proto:!0,forced:!a},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(t,c,e){var n=e("0b42");t.exports=function(t,c){return new(n(t))(0===c?0:c)}},"76db":function(t,c,e){"use strict";e.r(c);var n=e("7a23"),o=Object(n["h"])("div",null,[Object(n["h"])("div",{class:"spinner-border text-primary",role:"status"},[Object(n["h"])("span",{class:"visually-hidden"},"Loading...")])],-1),i={class:"card"},a={class:"card-body text-center fs-1 fw-bold text-secondary m-3"},r=Object(n["h"])("p",null,[Object(n["h"])("i",{class:"bi bi-check2-square"})],-1),s={class:"container mt-3"},l={class:"row"},d={class:"col-12 col-md-3"},u={class:"list row pe-md-5",ref:"list"},b={class:"col-6 col-md-12"},h={class:"col-6 col-md-12"},f={class:"col-6 col-md-12"},p={class:"col-6 col-md-12"},j={class:"col-12 col-md-9"},O={class:"row"},g=["onClick"],v={class:"card h-100"},m={class:"card-img-top cart-img"},y=["src"],C={class:"card-body p-3"},w={class:"d-flex align-items-center card-title"},x={class:"user-cart-title"},L={class:"d-flex justify-content-between align-items-center"},k={class:"origin-price fw-light mb-0"},P={class:"price fw-bold mb-0 fs-5"},E=["onClick","disabled"],A={key:0,class:"spinner-border text-danger spinner-border-sm",role:"status"},$=Object(n["h"])("span",{class:"visually-hidden"},"Loading...",-1),V=[$],_={key:1},J=Object(n["h"])("i",{class:"bi bi-cart4"},null,-1),I=Object(n["h"])("span",null,"加入購物車",-1),q=[J,I],M={class:"cart_group"},U=Object(n["h"])("i",{class:"bi bi-cart4"},null,-1),G=[U],T={key:0,class:"p-3"},B={class:"table align-middle caption-top"},R=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",{class:"col-1"}),Object(n["h"])("th",{class:"col"},"項目"),Object(n["h"])("th",{class:"col-2"},"數量"),Object(n["h"])("th",{class:"col-3"},"價格")])],-1),D=["onClick"],K=Object(n["h"])("i",{class:"bi bi-x-circle"},null,-1),N=[K],S={align:"rigth"},z=["onChange","disabled","onUpdate:modelValue"],F=Object(n["h"])("td",{colspan:"3",align:"right"},"原價：",-1),H={colspan:"1"},Q=Object(n["h"])("td",{colspan:"3",align:"right"},"總金額：",-1),W={colspan:"1"},X={class:"input-group d-flex"};function Y(t,c,e,$,J,I){var U=this,K=Object(n["G"])("Loading");return Object(n["y"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(K,{active:J.isGetLoading,"is-full-page":!0},{default:Object(n["T"])((function(){return[o]})),_:1},8,["active"]),Object(n["k"])(K,{active:J.isLoading,"is-full-page":!0},{default:Object(n["T"])((function(){return[Object(n["h"])("div",null,[Object(n["h"])("div",i,[Object(n["h"])("div",a,[r,Object(n["h"])("p",null,Object(n["J"])(J.isLoadingMassege),1)])])])]})),_:1},8,["active"]),Object(n["h"])("div",s,[Object(n["h"])("div",l,[Object(n["h"])("div",d,[Object(n["h"])("ul",u,[Object(n["h"])("li",b,[Object(n["h"])("a",{class:"d-block py-0 py-md-2 cart-list-active",href:"#",onClick:c[0]||(c[0]=Object(n["V"])((function(t){return I.productList("all")}),["prevent"])),"data-list":"all"}," 所有 - ALL ")]),Object(n["h"])("li",h,[Object(n["h"])("a",{class:"d-block py-0 py-md-2",href:"#",onClick:c[1]||(c[1]=Object(n["V"])((function(t){return I.productList("蛋糕")}),["prevent"])),"data-list":"蛋糕"}," 蛋糕 - CAKE ")]),Object(n["h"])("li",f,[Object(n["h"])("a",{class:"d-block py-0 py-md-2",href:"#",onClick:c[2]||(c[2]=Object(n["V"])((function(t){return I.productList("派餅")}),["prevent"])),"data-list":"派餅"}," 派餅 - PIE ")]),Object(n["h"])("li",p,[Object(n["h"])("a",{class:"d-block py-0 py-md-2",href:"#",onClick:c[3]||(c[3]=Object(n["V"])((function(t){return I.productList("麵包")}),["prevent"])),"data-list":"麵包"}," 麵包 - BREAD ")])],512)]),Object(n["h"])("div",j,[Object(n["h"])("div",O,[(Object(n["y"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(J.listProducts,(function(c){return Object(n["y"])(),Object(n["g"])("div",{class:"col-6 col-md-4 mb-2",key:c.id},[Object(n["h"])("a",{href:"#",onClick:Object(n["V"])((function(t){return I.goProduct(c.id)}),["prevent"]),style:{"text-decoration":"none",color:"#000"}},[Object(n["h"])("div",v,[Object(n["h"])("div",m,[Object(n["h"])("img",{src:c.imageUrl,class:"w-100",alt:""},null,8,y)]),Object(n["h"])("div",C,[Object(n["h"])("div",w,[Object(n["h"])("b",x,Object(n["J"])(c.title),1)]),Object(n["h"])("div",L,[Object(n["h"])("p",k," $"+Object(n["J"])(t.$filters.currency(c.origin_price)),1),Object(n["h"])("p",P," $"+Object(n["J"])(t.$filters.currency(c.price)),1)]),Object(n["h"])("button",{class:"btn btn-outline-danger py-1 w-100 mt-2",type:"button",onClick:Object(n["V"])((function(t){return I.addCart(c.id,!0)}),["prevent","stop"]),disabled:U.status.loadingItem===c.id},[U.status.loadingItem===c.id?(Object(n["y"])(),Object(n["g"])("div",A,V)):(Object(n["y"])(),Object(n["g"])("span",_,q))],8,E)])])],8,g)])})),128))])])])]),Object(n["h"])("div",M,[Object(n["h"])("button",{class:"btn btn-outline-info rounded-pill fs-2",onClick:c[4]||(c[4]=Object(n["V"])((function(t){return I.showCart()}),["prevent"]))},G),J.cartActive?(Object(n["y"])(),Object(n["g"])("div",T,[Object(n["h"])("table",B,[R,Object(n["h"])("tbody",null,[(Object(n["y"])(!0),Object(n["g"])(n["a"],null,Object(n["E"])(J.cartProducts.carts,(function(t){return Object(n["y"])(),Object(n["g"])("tr",{key:t.id},[Object(n["h"])("td",null,[Object(n["h"])("button",{class:"btn p-0",onClick:Object(n["V"])((function(c){return I.delCart(t.id)}),["prevent"])},N,8,D)]),Object(n["h"])("td",null,Object(n["J"])(t.product.title),1),Object(n["h"])("td",S,[Object(n["U"])(Object(n["h"])("input",{type:"number",class:"form-control form-control-sm p-1",id:"count",min:"1",onChange:function(c){return I.addCart(t.id,!1,t.qty)},disabled:t.id===J.status.loadingItem,"onUpdate:modelValue":function(c){return t.qty=c}},null,40,z),[[n["O"],t.qty,void 0,{number:!0}]])]),Object(n["h"])("td",null,Object(n["J"])(t.final_total),1)])})),128))]),Object(n["h"])("tfoot",null,[Object(n["h"])("tr",null,[F,Object(n["h"])("td",H,Object(n["J"])(J.cartProducts.total),1)]),Object(n["h"])("tr",null,[Q,Object(n["h"])("td",W,Object(n["J"])(J.cartProducts.final_total),1)])])]),Object(n["h"])("div",X,[Object(n["U"])(Object(n["h"])("input",{class:"form-control form-control-sm p-1",type:"text","onUpdate:modelValue":c[5]||(c[5]=function(t){return J.coupon_code=t}),placeholder:"請填寫優惠卷碼"},null,512),[[n["O"],J.coupon_code]]),Object(n["h"])("button",{class:"btn btn-outline-danger",type:"button",onClick:c[6]||(c[6]=function(){return I.addCouponCode&&I.addCouponCode.apply(I,arguments)})},"使用優惠卷")])])):Object(n["f"])("",!0)])],64)}e("99af"),e("4de4"),e("d3b7"),e("159b");var Z={data:function(){return{listcetegory:"all",products:[],pagination:{},listProducts:[],cartProducts:[],cartActive:!1,status:{loadingItem:""},coupon_code:"",isGetLoading:!1,isLoading:!1,isLoadingMassege:""}},methods:{getProduct:function(){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/products");this.isGetLoading=!0,this.$http.get(c).then((function(c){t.isGetLoading=!1,t.products=c.data.products,t.listProducts=t.products}))},getCart:function(){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/cart");this.$http.get(c).then((function(c){t.cartProducts=c.data.data}))},goProduct:function(t){this.$router.push("product/".concat(t))},productList:function(t){this.listProducts="all"===t?this.products:this.products.filter((function(c){return c.category===t})),this.listcetegory=t,this.$refs.list.childNodes.forEach((function(c){c.firstChild.dataset.list===t?c.firstChild.classList.add("cart-list-active"):c.firstChild.classList.remove("cart-list-active")}))},addCart:function(t,c){var e=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o="post",i="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/cart");c||(o="put",i="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/cart/").concat(t)),this.status.loadingItem=t;var a={product_id:t,qty:n};this.$http[o](i,{data:a}).then((function(t){e.isLoading=!0,e.isLoadingMassege=t.data.message,e.status.loadingItem="",e.getCart()}))},delCart:function(t){var c=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/cart/").concat(t);this.$http.delete(e).then((function(t){c.isLoading=!0,c.isLoadingMassege=t.data.message,c.getCart(),console.log(t.data)}))},showCart:function(){this.cartActive=!this.cartActive},addCouponCode:function(){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/coupon"),e={code:this.coupon_code};this.$http.post(c,{data:e}).then((function(c){t.isLoading=!0,t.isLoadingMassege=c.data.message,t.getCart()}))}},watch:{cartProducts:function(){var t=0;this.cartProducts.carts.forEach((function(c){t+=c.qty})),this.$bus.$emit("getmitt",t)},isLoading:function(){var t=this;setTimeout((function(){t.isLoading=!1}),1500)}},created:function(){this.getProduct(),this.getCart()}},tt=(e("e80f"),e("6b0d")),ct=e.n(tt);const et=ct()(Z,[["render",Y]]);c["default"]=et},8418:function(t,c,e){"use strict";var n=e("a04b"),o=e("9bf2"),i=e("5c6c");t.exports=function(t,c,e){var a=n(c);a in t?o.f(t,a,i(0,e)):t[a]=e}},"99af":function(t,c,e){"use strict";var n=e("23e7"),o=e("da84"),i=e("d039"),a=e("e8b5"),r=e("861d"),s=e("7b0b"),l=e("07fa"),d=e("8418"),u=e("65f0"),b=e("1dde"),h=e("b622"),f=e("2d00"),p=h("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",g=o.TypeError,v=f>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),m=b("concat"),y=function(t){if(!r(t))return!1;var c=t[p];return void 0!==c?!!c:a(t)},C=!v||!m;n({target:"Array",proto:!0,forced:C},{concat:function(t){var c,e,n,o,i,a=s(this),r=u(a,0),b=0;for(c=-1,n=arguments.length;c<n;c++)if(i=-1===c?a:arguments[c],y(i)){if(o=l(i),b+o>j)throw g(O);for(e=0;e<o;e++,b++)e in i&&d(r,b,i[e])}else{if(b>=j)throw g(O);d(r,b++,i)}return r.length=b,r}})},a640:function(t,c,e){"use strict";var n=e("d039");t.exports=function(t,c){var e=[][t];return!!e&&n((function(){e.call(null,c||function(){throw 1},1)}))}},b727:function(t,c,e){var n=e("0366"),o=e("e330"),i=e("44ad"),a=e("7b0b"),r=e("07fa"),s=e("65f0"),l=o([].push),d=function(t){var c=1==t,e=2==t,o=3==t,d=4==t,u=6==t,b=7==t,h=5==t||u;return function(f,p,j,O){for(var g,v,m=a(f),y=i(m),C=n(p,j),w=r(y),x=0,L=O||s,k=c?L(f,w):e||b?L(f,0):void 0;w>x;x++)if((h||x in y)&&(g=y[x],v=C(g,x,m),t))if(c)k[x]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return x;case 2:l(k,g)}else switch(t){case 4:return!1;case 7:l(k,g)}return u?-1:o||d?d:k}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},e80f:function(t,c,e){"use strict";e("3e1f")},e8b5:function(t,c,e){var n=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-648dcb06.250fa074.js.map