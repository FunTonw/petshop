(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-831d34e6"],{"0b42":function(t,e,c){var n=c("da84"),i=c("e8b5"),a=c("68ee"),o=c("861d"),s=c("b622"),r=s("species"),l=n.Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,a(e)&&(e===l||i(e.prototype))?e=void 0:o(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?l:e}},"1dde":function(t,e,c){var n=c("d039"),i=c("b622"),a=c("2d00"),o=i("species");t.exports=function(t){return a>=51||!n((function(){var e=[],c=e.constructor={};return c[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"5e70":function(t,e,c){},"65f0":function(t,e,c){var n=c("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},"7f14":function(t,e,c){"use strict";c.r(e);var n=c("7a23"),i=Object(n["i"])("div",null,[Object(n["i"])("div",{class:"spinner-border text-primary",role:"status"},[Object(n["i"])("span",{class:"visually-hidden"},"Loading...")])],-1),a={class:"card"},o={class:"card-body text-center fs-1 fw-bold text-secondary m-3"},s=Object(n["i"])("p",null,[Object(n["i"])("i",{class:"bi bi-check2-square"})],-1),r={key:0,class:"container mt-5"},l=Object(n["i"])("h2",null,"購物車",-1),d={class:"mt-5"},b={class:"col-12 table table-striped table-light text-center"},u=Object(n["i"])("thead",{class:"fw-bold"},[Object(n["i"])("tr",null,[Object(n["i"])("td",null,"名稱"),Object(n["i"])("td",{class:"d-none d-lg-table-cell"},"數量"),Object(n["i"])("td",null,"單價"),Object(n["i"])("td",null,"金額"),Object(n["i"])("td",null,"刪除")])],-1),j={class:"fw-bold"},f={class:"input-qty border border-1 rounded p-0 d-lg-none d-flex align-items-center justify-content-between col-md-6 col-12"},O=["onClick"],p=Object(n["i"])("i",{class:"bi bi-dash"},null,-1),h=[p],v={key:1,class:"border-0 rounded-start fs-4 qty-button-disabled",disabled:""},g=Object(n["i"])("i",{class:"bi bi-dash"},null,-1),y=[g],m={class:"px-5"},x=["onClick"],k=Object(n["i"])("i",{class:"bi bi-plus"},null,-1),C=[k],L={class:"d-none d-lg-table-cell"},w={class:"input-qty border border-1 rounded p-0 mx-auto d-flex align-items-center justify-content-between col-md-6 col-12"},A=["onClick"],q=Object(n["i"])("i",{class:"bi bi-dash"},null,-1),$=[q],_={key:1,class:"border-0 rounded-start fs-4 qty-button-disabled",disabled:""},I=Object(n["i"])("i",{class:"bi bi-dash"},null,-1),V=[I],G={class:"px-5"},M={key:0,class:"spinner-border text-danger spinner-border-sm",role:"status"},T=Object(n["i"])("span",{class:"visually-hidden"},"Loading...",-1),X=[T],J={key:1},B=["onClick"],E=Object(n["i"])("i",{class:"bi bi-plus"},null,-1),Q=[E],S=["onClick"],U=Object(n["i"])("i",{class:"bi bi-x"},null,-1),W=[U],z={class:"row"},D={class:"col-md-6 col-12 mb-3 mb-md-0"},F={class:"input-group d-flex"},H=Object(n["i"])("div",{class:"form-text"},"開幕歡慶優惠碼：ilovecake",-1),K={class:"col-md-6 col-12 fw-bold fs-5 text-end"},N={class:"text-danger"},P={class:"d-flex justify-content-end"},R=Object(n["k"])("繼續選購"),Y=Object(n["k"])("前往結帳"),Z={key:1,class:"container"},tt={class:"d-flex flex-column justify-content-center align-items-center fs-3 fw-bolder text-secondary mt-5 vh-100"},et=Object(n["i"])("p",{class:"fw-bolder"},"很抱歉，您的購物車還沒有商品",-1),ct=Object(n["i"])("p",null,"趕緊將喜愛商品加入購物車吧",-1),nt=Object(n["k"])("回商品頁"),it=Object(n["i"])("p",{class:"icon-hand"},[Object(n["i"])("i",{class:"bi bi-hand-index"})],-1);function at(t,e,c,p,g,k){var q=this,I=Object(n["I"])("Loading"),T=Object(n["I"])("router-link");return Object(n["A"])(),Object(n["h"])(n["a"],null,[Object(n["l"])(I,{active:g.isGetLoading,"is-full-page":!0},{default:Object(n["V"])((function(){return[i]})),_:1},8,["active"]),Object(n["l"])(I,{active:g.isLoading,"is-full-page":!0},{default:Object(n["V"])((function(){return[Object(n["i"])("div",null,[Object(n["i"])("div",a,[Object(n["i"])("div",o,[s,Object(n["i"])("p",null,Object(n["L"])(g.isLoadingMassege),1)])])])]})),_:1},8,["active"]),g.carts.length>0?(Object(n["A"])(),Object(n["h"])("div",r,[l,Object(n["i"])("div",d,[Object(n["i"])("table",b,[u,Object(n["i"])("tbody",null,[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["G"])(g.carts,(function(e){return Object(n["A"])(),Object(n["h"])("tr",{style:{"vertical-align":"middle"},key:e.id},[Object(n["i"])("td",j,[Object(n["k"])(Object(n["L"])(e.product.title)+" ",1),Object(n["i"])("div",f,[e.qty>1?(Object(n["A"])(),Object(n["h"])("button",{key:0,onClick:Object(n["X"])((function(t){return k.cartsCount(e,"dash")}),["prevent"]),class:"border-0 rounded-start fs-4 qty-button"},h,8,O)):(Object(n["A"])(),Object(n["h"])("button",v,y)),Object(n["i"])("span",m,Object(n["L"])(e.qty),1),Object(n["i"])("button",{onClick:Object(n["X"])((function(t){return k.cartsCount(e,"add")}),["prevent"]),class:"border-0 rounded-end fs-4 qty-button"},C,8,x)])]),Object(n["i"])("td",L,[Object(n["i"])("div",w,[e.qty>1?(Object(n["A"])(),Object(n["h"])("button",{key:0,onClick:Object(n["X"])((function(t){return k.cartsCount(e,"dash")}),["prevent"]),class:"border-0 rounded-start fs-4 qty-button"},$,8,A)):(Object(n["A"])(),Object(n["h"])("button",_,V)),Object(n["i"])("span",G,[q.status.loadingItem===e.id?(Object(n["A"])(),Object(n["h"])("div",M,X)):(Object(n["A"])(),Object(n["h"])("span",J,Object(n["L"])(e.qty),1))]),Object(n["i"])("button",{onClick:Object(n["X"])((function(t){return k.cartsCount(e,"add")}),["prevent"]),class:"border-0 rounded-end fs-4 qty-button"},Q,8,B)])]),Object(n["i"])("td",null,"$"+Object(n["L"])(t.$filters.currency(e.product.price)),1),Object(n["i"])("td",null,"$"+Object(n["L"])(t.$filters.currency(e.total)),1),Object(n["i"])("td",null,[Object(n["i"])("button",{class:"btn btn-outline-danger btn-sm",onClick:Object(n["X"])((function(t){return k.delCart(e)}),["prevent"])},W,8,S)])])})),128))])]),Object(n["i"])("div",z,[Object(n["i"])("div",D,[Object(n["i"])("div",F,[Object(n["i"])("button",{class:"btn btn-secondary",type:"button",onClick:e[0]||(e[0]=function(){return k.addCouponCode&&k.addCouponCode.apply(k,arguments)})},"使用優惠卷"),Object(n["W"])(Object(n["i"])("input",{class:"form-control form-control-sm p-1 px-2",type:"text","onUpdate:modelValue":e[1]||(e[1]=function(t){return g.coupon_code=t}),placeholder:"請輸入優惠卷碼"},null,512),[[n["Q"],g.coupon_code]])]),H]),Object(n["i"])("div",K,[Object(n["i"])("p",null,"總金額 : $"+Object(n["L"])(t.$filters.currency(g.originTotal)),1),Object(n["i"])("p",N,"折扣價 : $"+Object(n["L"])(t.$filters.currency(g.total)),1)]),Object(n["i"])("div",P,[Object(n["l"])(T,{class:"btn btn-outline-secondary me-3",to:"/user/cart"},{default:Object(n["V"])((function(){return[R]})),_:1}),Object(n["l"])(T,{class:"btn btn-danger",to:"/user/form"},{default:Object(n["V"])((function(){return[Y]})),_:1})])])])])):(Object(n["A"])(),Object(n["h"])("div",Z,[Object(n["i"])("div",tt,[et,ct,Object(n["l"])(T,{to:"/user/cart",class:"btn btn-danger fs-3"},{default:Object(n["V"])((function(){return[nt]})),_:1}),it])]))],64)}c("99af");var ot={data:function(){return{carts:[],originTotal:0,total:0,coupon_code:"",status:{loadingItem:""},isGetLoading:!1,isLoading:!1,isLoadingMassege:""}},methods:{getCarts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/cart");this.isGetLoading=!0,this.$http.get(e).then((function(e){t.isGetLoading=!1,t.carts=e.data.data.carts,t.originTotal=e.data.data.total,t.total=e.data.data.final_total}))},cartsCount:function(t,e){var c=this,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/cart/").concat(t.id),i=t.qty;this.status.loadingItem=t.id,"add"===e?i+=1:i-=1;var a={product_id:t.id,qty:i};this.$http.put(n,{data:a}).then((function(t){t.data.success&&(c.status.loadingItem="",c.getCarts())}))},delCart:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/cart/").concat(t.id);this.$http.delete(c).then((function(t){e.isLoading=!0,e.isLoadingMassege=t.data.message,e.getCarts()}))},addCouponCode:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("funtonw-api","/coupon"),c={code:this.coupon_code};this.$http.post(e,{data:c}).then((function(e){e.data.success&&(t.isLoading=!0,t.isLoadingMassege=e.data.message,t.getCarts())}))}},watch:{isLoading:function(){var t=this;setTimeout((function(){t.isLoading=!1}),1500)}},created:function(){this.getCarts()}},st=(c("dc98"),c("6b0d")),rt=c.n(st);const lt=rt()(ot,[["render",at]]);e["default"]=lt},8418:function(t,e,c){"use strict";var n=c("a04b"),i=c("9bf2"),a=c("5c6c");t.exports=function(t,e,c){var o=n(e);o in t?i.f(t,o,a(0,c)):t[o]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),i=c("da84"),a=c("d039"),o=c("e8b5"),s=c("861d"),r=c("7b0b"),l=c("07fa"),d=c("8418"),b=c("65f0"),u=c("1dde"),j=c("b622"),f=c("2d00"),O=j("isConcatSpreadable"),p=9007199254740991,h="Maximum allowed index exceeded",v=i.TypeError,g=f>=51||!a((function(){var t=[];return t[O]=!1,t.concat()[0]!==t})),y=u("concat"),m=function(t){if(!s(t))return!1;var e=t[O];return void 0!==e?!!e:o(t)},x=!g||!y;n({target:"Array",proto:!0,forced:x},{concat:function(t){var e,c,n,i,a,o=r(this),s=b(o,0),u=0;for(e=-1,n=arguments.length;e<n;e++)if(a=-1===e?o:arguments[e],m(a)){if(i=l(a),u+i>p)throw v(h);for(c=0;c<i;c++,u++)c in a&&d(s,u,a[c])}else{if(u>=p)throw v(h);d(s,u++,a)}return s.length=u,s}})},dc98:function(t,e,c){"use strict";c("5e70")},e8b5:function(t,e,c){var n=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-831d34e6.615f5574.js.map